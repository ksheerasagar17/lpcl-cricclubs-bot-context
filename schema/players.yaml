# Cricket Players Schema Glossary
# This YAML file describes the structure and meaning of cricket player data

collection_name: "players"
description: "Individual cricket player profiles with career statistics, demographics, and playing style information"

# Document Structure Overview
document_structure:
  description: "Each document represents a single cricket player with comprehensive profile data"
  primary_key: "_id"
  unique_identifiers: ["playerID", "_id"]
  data_granularity: "Individual player level with career aggregates"

# Field Definitions with Cricket Context
fields:
  # Database Metadata
  _id:
    type: "ObjectId"
    description: "MongoDB unique document identifier"
    example: "507f1f77bcf86cd799439011"
    required: true
    cricket_context: "Primary database key for player record"

  # Player Identification
  playerID:
    type: "integer"
    description: "Unique identifier for the cricket player"
    example: 286412
    required: true
    cricket_context: "Business key for player identification across all systems"

  # Personal Information
  firstName:
    type: "string"
    description: "Player's legal first name"
    example: "Virat"
    required: true
    cricket_context: "Official name for records and documentation"

  lastName:
    type: "string"
    description: "Player's legal last name"
    example: "Kohli"
    required: true
    cricket_context: "Official surname for identification"

  nickName:
    type: "string"
    description: "Player's commonly used nickname or short name"
    example: "King Kohli"
    required: false
    cricket_context: "Display name for UI and fan engagement"

  fullName:
    type: "string"
    description: "Complete formatted name for display"
    example: "Virat Kohli"
    required: true
    cricket_context: "Full name for official displays and scorecards"

  # Demographics
  dateOfBirth:
    type: "string"
    format: "ISO 8601 date"
    description: "Player's birth date"
    example: "1988-11-05"
    required: true
    cricket_context: "Used for age calculations and eligibility verification"

  age:
    type: "integer"
    description: "Current age of the player"
    example: 35
    required: true
    cricket_context: "Dynamic field for age-based analysis and selection"

  birthPlace:
    type: "string"
    description: "City and country where player was born"
    example: "Delhi, India"
    required: false
    cricket_context: "Geographic origin for player background"

  nationality:
    type: "string"
    description: "Player's nationality or citizenship"
    example: "Indian"
    required: true
    cricket_context: "Determines international team eligibility"

  # Physical Attributes
  height:
    type: "string"
    description: "Player's height in feet and inches"
    example: "5'9\""
    required: false
    cricket_context: "Physical attribute for player profiling"

  weight:
    type: "string"
    description: "Player's weight in kilograms"
    example: "70 kg"
    required: false
    cricket_context: "Physical fitness and profiling data"

  # Playing Style and Skills
  battingStyle:
    type: "string"
    description: "Player's batting technique preference"
    examples: ["Right Handed Batter", "Left Handed Batter", "Switch Hitter"]
    required: true
    cricket_context: "Fundamental batting approach affecting field placements"

  bowlingStyle:
    type: "string"
    description: "Player's bowling technique and pace"
    examples: ["Right Arm Fast", "Left Arm Medium", "Right Arm Spin", "Left Arm Spin", "Wicket Keeper"]
    required: false
    cricket_context: "Bowling capability classification for team balance"

  playerRole:
    type: "string"
    description: "Primary role in the cricket team"
    examples: ["Batsman", "Bowler", "All-rounder", "Wicket Keeper", "Specialist Fielder"]
    required: true
    cricket_context: "Team composition and strategy planning"

  specialization:
    type: "string"
    description: "Specific skill specialization within role"
    examples: ["Opening Batsman", "Middle Order", "Finisher", "Pace Bowler", "Spinner"]
    required: false
    cricket_context: "Detailed role for tactical planning"

  # Team and Career Information
  currentTeam:
    type: "integer"
    description: "Team ID of player's current team"
    example: 101
    required: false
    cricket_context: "Current team affiliation for roster management"

  currentTeamName:
    type: "string"
    description: "Name of player's current team"
    example: "Mumbai Indians"
    required: false
    cricket_context: "Human-readable current team for displays"

  previousTeams:
    type: "array"
    items_type: "object"
    description: "History of teams player has represented"
    cricket_context: "Career progression and transfer history"
    team_history_structure:
      teamId:
        type: "integer"
        description: "Team identifier"
        example: 102
      
      teamName:
        type: "string"
        description: "Team name"
        example: "Chennai Super Kings"
      
      startDate:
        type: "string"
        format: "ISO 8601 date"
        description: "When player joined this team"
        example: "2018-01-01"
      
      endDate:
        type: "string"
        format: "ISO 8601 date"
        description: "When player left this team"
        example: "2021-12-31"
      
      role:
        type: "string"
        description: "Player's role in this team"
        example: "Captain"

  # Career Timeline
  careerStart:
    type: "string"
    format: "ISO 8601 date"
    description: "Date when player started professional cricket"
    example: "2008-08-18"
    required: true
    cricket_context: "Career beginning for experience calculations"

  retiredDate:
    type: "string"
    format: "ISO 8601 date"
    description: "Date when player retired from cricket"
    example: null
    nullable: true
    required: false
    cricket_context: "Career end date if applicable"

  isActive:
    type: "boolean"
    description: "Whether player is currently active in cricket"
    example: true
    required: true
    cricket_context: "Current playing status for team selection"

  # Media and Profile Assets
  profilepic_file_path:
    type: "string"
    description: "Path to player's profile picture"
    example: "/documentsRep/profilePics/286412.JPG"
    required: false
    cricket_context: "Profile image for UI display and media"

  jersey_number:
    type: "integer"
    description: "Player's preferred jersey number"
    example: 18
    required: false
    cricket_context: "Jersey identification for fans and broadcasts"

  # Career Statistics Summary
  careerStats:
    type: "object"
    description: "Aggregated career statistics across all formats"
    cricket_context: "High-level career performance metrics"
    
    batting:
      type: "object"
      description: "Career batting statistics"
      fields:
        matchesPlayed:
          type: "integer"
          description: "Total matches played as batsman"
          example: 254
        
        runsScored:
          type: "integer"
          description: "Total career runs scored"
          example: 12169
        
        battingAverage:
          type: "number"
          description: "Career batting average"
          example: 57.32
        
        strikeRate:
          type: "number"
          description: "Career strike rate"
          example: 93.17
        
        centuries:
          type: "integer"
          description: "Number of hundreds scored"
          example: 43
        
        halfCenturies:
          type: "integer"
          description: "Number of fifties scored"
          example: 64
        
        highestScore:
          type: "integer"
          description: "Highest individual score"
          example: 183
        
        boundaries:
          type: "integer"
          description: "Total fours hit in career"
          example: 1020
        
        sixes:
          type: "integer"
          description: "Total sixes hit in career"
          example: 121

    bowling:
      type: "object"
      description: "Career bowling statistics"
      fields:
        wicketsTaken:
          type: "integer"
          description: "Total career wickets"
          example: 4
        
        bowlingAverage:
          type: "number"
          description: "Career bowling average"
          example: 166.25
        
        economyRate:
          type: "number"
          description: "Career economy rate"
          example: 8.31
        
        bowlingStrikeRate:
          type: "number"
          description: "Career bowling strike rate"
          example: 120.0
        
        bestFigures:
          type: "string"
          description: "Best bowling figures in an innings"
          example: "1/15"
        
        fiveWicketHauls:
          type: "integer"
          description: "Number of 5-wicket hauls"
          example: 0

    fielding:
      type: "object"
      description: "Career fielding statistics"
      fields:
        catches:
          type: "integer"
          description: "Total catches taken"
          example: 131
        
        runOuts:
          type: "integer"
          description: "Direct run-outs effected"
          example: 15
        
        stumpings:
          type: "integer"
          description: "Stumpings (for wicket keepers)"
          example: 0

  # Format-wise Statistics
  formatStats:
    type: "object"
    description: "Statistics broken down by cricket format"
    cricket_context: "Performance analysis by match format"
    
    test:
      type: "object"
      description: "Test cricket statistics"
      # Same structure as careerStats.batting/bowling
    
    odi:
      type: "object"
      description: "One Day International statistics"
      # Same structure as careerStats.batting/bowling
    
    t20:
      type: "object"
      description: "T20 cricket statistics"
      # Same structure as careerStats.batting/bowling
    
    t20i:
      type: "object"
      description: "T20 International statistics"
      # Same structure as careerStats.batting/bowling

  # Records and Achievements
  achievements:
    type: "array"
    items_type: "object"
    description: "List of notable achievements and records"
    cricket_context: "Career highlights and milestones"
    achievement_structure:
      title:
        type: "string"
        description: "Achievement title"
        example: "ICC ODI Player of the Year"
      
      year:
        type: "integer"
        description: "Year of achievement"
        example: 2018
      
      description:
        type: "string"
        description: "Detailed description of the achievement"
        example: "Won ICC ODI Player of the Year award"

  # Contact and Social Media
  socialMedia:
    type: "object"
    description: "Social media handles and contact information"
    required: false
    cricket_context: "Fan engagement and social presence"
    fields:
      twitter:
        type: "string"
        description: "Twitter handle"
        example: "@imVkohli"
      
      instagram:
        type: "string"
        description: "Instagram handle"
        example: "@virat.kohli"

  # Administrative Fields
  lastUpdated:
    type: "string"
    format: "ISO 8601 datetime"
    description: "Timestamp of last profile update"
    example: "2025-01-13T10:30:00Z"
    required: true
    cricket_context: "Data freshness tracking"

  dataSource:
    type: "string"
    description: "Source of player data"
    example: "ESPN Cricinfo"
    required: true
    cricket_context: "Data lineage and quality tracking"

# Common Query Patterns
common_queries:
  by_name: "Find player by first and last name"
  by_team: "Find all players in a specific team"
  by_role: "Find players by playing role"
  by_batting_style: "Find players by batting style"
  by_bowling_style: "Find players by bowling style"
  active_players: "Find all currently active players"
  retired_players: "Find all retired players"
  by_nationality: "Find players by nationality"
  by_age_range: "Find players within specific age range"

# Aggregation Pipeline Examples
aggregation_examples:
  top_run_scorers:
    description: "Get top run scorers across all formats"
    pipeline: |
      [
        {"$match": {"isActive": true}},
        {"$sort": {"careerStats.batting.runsScored": -1}},
        {"$limit": 10},
        {"$project": {
          "fullName": 1,
          "runsScored": "$careerStats.batting.runsScored",
          "average": "$careerStats.batting.battingAverage"
        }}
      ]

  team_composition:
    description: "Analyze team composition by player roles"
    pipeline: |
      [
        {"$match": {"currentTeam": 101}},
        {"$group": {
          "_id": "$playerRole",
          "count": {"$sum": 1},
          "players": {"$push": "$fullName"}
        }}
      ]

  format_specialists:
    description: "Find players who excel in specific formats"
    pipeline: |
      [
        {"$match": {
          "formatStats.t20.batting.strikeRate": {"$gt": 140},
          "formatStats.t20.batting.matchesPlayed": {"$gt": 20}
        }},
        {"$project": {
          "fullName": 1,
          "t20StrikeRate": "$formatStats.t20.batting.strikeRate",
          "t20Matches": "$formatStats.t20.batting.matchesPlayed"
        }},
        {"$sort": {"t20StrikeRate": -1}}
      ]

# Data Quality Rules
data_quality:
  name_validation: "firstName and lastName should not be empty"
  date_validation: "dateOfBirth should be before careerStart"
  stats_consistency: "Batting average should match runs/dismissals calculation"
  team_consistency: "currentTeam should exist in teams collection"
  role_validation: "playerRole should be from predefined list"
  status_consistency: "retiredDate should be null if isActive is true"

# Performance Indexes (Recommended)
recommended_indexes:
  - field: "playerID"
    type: "unique"
    purpose: "Fast player lookup"
  - fields: ["firstName", "lastName"]
    type: "compound"
    purpose: "Name-based searches"
  - field: "currentTeam"
    type: "ascending"
    purpose: "Team roster queries"
  - field: "playerRole"
    type: "ascending"
    purpose: "Role-based filtering"
  - field: "battingStyle"
    type: "ascending"
    purpose: "Style-based analysis"
  - field: "isActive"
    type: "ascending"
    purpose: "Active player filtering"
  - field: "careerStats.batting.runsScored"
    type: "descending"
    purpose: "Performance rankings"